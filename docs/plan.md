# 推しおめ

## サービス概要

推し（Vtuber、アイドル等）の誕生日を祝うためのクラウドファンディングプラットフォーム。
ファンが連携して駅広告やデジタルサイネージなどにお誕生日広告を出すことのできるサービス。

## 登場人物

- 企画者：推しの誕生日企画を立ち上げたい人
- ユーザー：企画に参加して支援する人

## 主な機能

### 1. 誕生日企画の作成・支援

- 企画者が企画を申請（事務所承認と前金が必要）
- 承認された企画がプラットフォームに掲載
- ユーザーは掲載期間中に支援可能
- 企画例：
  - デジタルサイネージ（街頭ビジョンなど）
  - 駅広告（渋谷、新宿などの駅構内の広告）

### 2. 決済機能

- 支援金額は企画ごとに一律（3,000円）
- リアルタイムで支援総額を表示
- 決済方法：
  - クレジットカード（Stripe決済）

## 技術スタック

### フロントエンド

- React + TypeScript
  - Vite
  - 型安全性の確保
  - コンポーネントベースの開発

- TailwindCSS
  - ユーティリティファーストのCSSフレームワーク
  - レスポンシブデザイン
  - カスタムデザインシステム（oshi-pink, oshi-purple等）

### バックエンド（Supabase）

- PostgreSQL データベース
- Row Level Security (RLS)
- 認証（メール認証）
- ストレージ（プロジェクト画像）
- リアルタイムデータ同期

## プロジェクトの構成

```
oshiome/
├── frontend/           # フロントエンドアプリケーション
│   ├── src/
│   │   ├── assets/    # 画像などの静的アセット
│   │   ├── components/# コンポーネント
│   │   │   ├── common/    # 共通コンポーネント
│   │   │   ├── features/  # 機能別コンポーネント
│   │   │   ├── auth/      # 認証関連コンポーネント
│   │   │   └── admin/     # 管理画面コンポーネント
│   │   ├── contexts/  # Reactコンテキスト
│   │   ├── data/      # データ定義
│   │   ├── lib/       # ライブラリ設定（Supabase等）
│   │   ├── pages/     # ページコンポーネント
│   │   │   ├── auth/      # 認証関連ページ
│   │   │   └── admin/     # 管理画面ページ
│   │   ├── providers/ # プロバイダーコンポーネント
│   │   ├── repositories/ # データアクセス層
│   │   ├── scripts/   # スクリプト
│   │   ├── styles/    # スタイル定義
│   │   ├── types/     # 型定義
│   │   └── utils/     # ユーティリティ関数
│   └── public/        # 静的ファイル
├── db/               # データベースマイグレーション
└── docs/            # ドキュメント
```

## 開発フロー

1. 開発サーバーの起動
   ```bash
   cd frontend
   npm install
   npm run dev
   ```

2. ビルド
   ```bash
   cd frontend
   npm run build
   ```

## 実装状況

### フェーズ 1：基盤実装（完了）

- [✔︎] 開発環境セットアップ
  - [✔︎] Vite + React + TypeScript
  - [✔︎] TailwindCSS
  - [✔︎] ESLint + Prettier
  - [✔︎] Supabase連携

### フェーズ 2：コア機能実装（完了）

- [✔︎] データベース設計
  - [✔︎] テーブル設計
  - [✔︎] マイグレーション
  - [✔︎] RLS設定

- [✔︎] 認証機能
  - [✔︎] サインアップ
  - [✔︎] サインイン
  - [✔︎] パスワードリセット

- [✔︎] プロジェクト機能
  - [✔︎] プロジェクト一覧表示
  - [✔︎] プロジェクト詳細表示
  - [✔︎] プロジェクトフィルター
  - [✔︎] プロジェクトページネーション
  - [✔︎] プロジェクト検索機能

- [✔︎] 支援機能
  - [✔︎] 支援フォーム
  - [✔︎] 決済処理
  - [✔︎] 支援完了通知

### フェーズ 3：UI/UX改善（完了）

- [✔︎] レスポンシブデザイン
- [✔︎] ローディング状態
- [✔︎] エラーハンドリング
- [✔︎] フィードバック表示
- [✔︎] アニメーション

### フェーズ 4：追加機能（進行中）

- [✔︎] マイページ機能
  - [✔︎] 支援履歴
  - [✔︎] お気に入りプロジェクト
  - [✔︎] プロフィール編集

- [🔄] 管理機能
  - [✔︎] プロジェクト承認
  - [✔︎] ユーザー管理
  - [🔄] 統計情報

### セキュリティ対策

- [✔︎] RLSによるデータアクセス制御
- [✔︎] 入力値のバリデーション
- [✔︎] XSS対策
- [✔︎] CSRF対策
- [✔︎] レート制限
- [✔︎] エラーログ管理

## 参考情報

- 参考サイト：https://train-ad.net/
- 連携先：https://accacom.jp/alliance-fmc/
- 類似サービス：センイル広告（Vtuber、アイドルの生誕祭広告）

## ユーザーの利用の流れ

### 企画者の場合

1. 企画の作成
   - 企画情報の入力
   - 企画ページの公開

2. 支援募集期間
   - SNS などで支援を呼びかけ
   - 支援状況のモニタリング

3. 企画実施
   - 集まった資金から手数料を除いた予算で広告実施
   - デザインの用意（外注可）

4. 企画終了
   - 実施レポートの作成

### 支援ユーザーの場合

1. 企画ページの閲覧
2. 支援金額の確認
3. 決済手続き
4. マイページでの支援履歴確認
5. 企画の進捗確認

## 実装スケジュール

### フェーズ 1：開発環境セットアップ（完了）

- [✔︎] GitHub設定
- [✔︎] React + TypeScript環境構築
- [✔︎] ESLint + Prettier設定
- [✔︎] コード品質管理の設定

### フェーズ 2：最小限の機能実装（MVP）（完了）

- [✔︎] 画面実装
  - [✔︎] ホーム画面
  - [✔︎] 企画一覧ページ
  - [✔︎] 企画詳細ページ
  - [✔︎] 支援フォーム
  - [✔︎] サインイン/サインアップページ

- [✔︎] UIコンポーネント実装
  - [✔︎] ヘッダー
  - [✔︎] フッター
  - [✔︎] プロジェクトカード
  - [✔︎] 進捗バー
  - [✔︎] フォーム要素

### フェーズ 3：データ連携の実装（完了）

- [✔︎] Supabase連携
  - [✔︎] プロジェクト設定
  - [✔︎] テーブル設計
  - [✔︎] 権限設定
  - [✔︎] フロントエンド連携
  - [✔︎] 認証機能実装
  - [✔︎] データアクセス層実装

- [✔︎] データモデル実装
  - [✔︎] ユーザー管理
  - [✔︎] プロジェクト管理
  - [✔︎] ビジョン管理
  - [✔︎] 支援管理
  - [✔︎] スケジュール管理
  - [✔︎] 更新情報管理

### フェーズ 4：デザインと文章内容の整備（完了）

- [✔︎] レスポンシブデザインの最適化
- [✔︎] TailwindCSSの設定
- [✔︎] 画像素材の改善
- [✔︎] 文章内容の整備
- [✔︎] UIの一貫性確保

### フェーズ 5：本番デプロイの準備（進行中）

- [🔄] インフラ整備
  - [✔︎] Supabase本番環境設定
  - [✔︎] ドメイン取得
  - [✔︎] DNS設定
  - [✔︎] SSL証明書設定

- [✔︎] セキュリティ対策
  - [✔︎] 環境変数の管理
  - [✔︎] アクセス制御
  - [✔︎] セキュリティヘッダーの設定
  - [✔︎] 依存パッケージの脆弱性チェック

- [🔄] CI/CD強化
  - [✔︎] GitHub Actionsワークフロー
    - [✔︎] CI（コード品質チェック）
    - [✔︎] ビルドテスト
  - [🔄] Vercelデプロイフロー
    - [✔︎] デプロイワークフロー設定
    - [✔︎] Vercelプロジェクト設定
    - [✔︎] 環境変数の設定
    - [🔄] デプロイテスト
  - [🔄] モニタリング設定
    - [✔︎] エラー監視
    - [🔄] パフォーマンス監視
    - [🔄] アクセス解析

### フェーズ 6：追加機能の実装（進行中）

- [✔︎] 支援者向け機能
  - [✔︎] マイページ
  - [✔︎] 支援履歴
  - [✔︎] お気に入りプロジェクト

- [🔄] 企画者向け機能
  - [✔︎] 企画管理ダッシュボード
  - [🔄] 支援者管理
  - [🔄] 進捗報告機能

- [🔄] 管理者向け機能
  - [✔︎] 企画承認フロー
  - [✔︎] ユーザー管理
  - [🔄] 統計情報

### フェーズ 7：ローンチ後の改善（予定）

- [ ] ユーザーフィードバックの収集
- [ ] パフォーマンス最適化
- [ ] 新機能の追加検討
  - [ ] ソーシャル連携機能
  - [ ] 複数推し支援機能
  - [ ] コミュニティ機能

### セキュリティチェックリスト

1. アプリケーションセキュリティ
   - [✔︎] 入力値のバリデーション
   - [✔︎] XSS対策（Reactの組み込み機能）
   - [✔︎] CSRF対策（Supabaseの組み込み機能）
   - [✔︎] SQLインジェクション対策（Supabaseの組み込み機能）
   - [✔︎] 適切なCORSの設定

2. 認証・認可
   - [✔︎] Supabase認証
   - [✔︎] セッション管理
   - [✔︎] アクセス制御
   - [🔄] 2要素認証（開発中）

3. データ保護
   - [✔︎] 個人情報の暗号化（Supabase）
   - [✔︎] バックアップ（Supabase）
   - [✔︎] データ削除ポリシー

4. インフラストラクチャセキュリティ
   - [✔︎] CDN配信（Vercel）
   - [✔︎] DDos保護
   - [✔︎] 脆弱性スキャン
   - [✔︎] セキュリティパッチ管理
